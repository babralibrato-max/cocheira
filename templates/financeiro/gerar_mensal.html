{% extends 'base.html' %}
{% block title %}Gerar Faturas Mensais - Cocheira{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h4><i class="bi bi-calendar-plus-fill"></i> Gerar Faturas do Mês</h4>
    <a href="{% url 'fatura_lista' %}" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Voltar</a>
</div>
<div class="card" style="max-width: 400px;">
    <div class="card-body">
        <p class="text-muted">Gera automaticamente uma fatura para cada contrato ativo no mês/ano selecionado, já vinculando os insumos não faturados do período.</p>
        <form method="post">
            {% csrf_token %}
            <div class="row g-3">
                <div class="col-6">
                    <label class="form-label fw-bold">Mês *</label>
                    <select name="mes" class="form-select">
                        {% for m in meses %}
                        <option value="{{ m }}" {% if m == mes %}selected{% endif %}>{{ m|stringformat:"02d" }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-6">
                    <label class="form-label fw-bold">Ano *</label>
                    <select name="ano" class="form-select">
                        {% for a in anos %}
                        <option value="{{ a }}" {% if a == ano %}selected{% endif %}>{{ a }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <hr>
            <button type="submit" class="btn btn-primary w-100">
                <i class="bi bi-lightning-charge-fill"></i> Gerar Faturas
            </button>
        </form>
    </div>
</div>
{% endblock %}
